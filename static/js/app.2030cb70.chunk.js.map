{"version":3,"sources":["App.js"],"names":["firebase","apps","length","default","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","database","updateFreq","firstMonId","secondMonId","newFirstFreq","newSecondFreq","updates","newFreqData","firstFreq","secondFreq","ref","update","App","props","state","firstMonImg","firstMonName","firstMonFreq","secondMonImg","secondMonName","secondMonFreq","numMon","allMonPage","monsterPage","pressed","this","setState","url","invalidFamily","invalidIndividuals","firstRandNum","secondRandNum","Math","floor","random","fetch","then","response","json","data","indexOf","results","family_id","com2us_id","freq","firstFreqCount","secondFreqCount","on","frequency","getFreq","firstString","JSON","stringify","secondString","firstNum","parse","secondNum","firstMon","secondMon","image_filename","name","updateMonster","firstMonPercentage","secondMonPercentage","toFixed","style","styles","container","comparisonContainer","monsterContainer","onPress","incFirstFreq","fadeDuration","source","uri","width","height","incSecondFreq","title","color","React","Component","StyleSheet","create","flex","backgroundColor","alignItems","justifyContent","flexDirection"],"mappings":"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","file":"static/js/app.2030cb70.chunk.js","sourcesContent":["import { StatusBar } from 'expo-status-bar';\nimport React, { useState } from 'react';\nimport { StyleSheet, Text, View, Image, TouchableNativeFeedback, TouchableHighlight, Button } from 'react-native';\nimport firebase from '@firebase/app';\nimport \"@firebase/database\";\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyCs5AfLDY0g9306B1yp7W1DzDj2wJkhwqo\",\n    authDomain: \"swweb-f7b67.firebaseapp.com\",\n    databaseURL: \"https://swweb-f7b67.firebaseio.com\",\n    projectId: \"swweb-f7b67\",\n    storageBucket: \"swweb-f7b67.appspot.com\",\n    messagingSenderId: \"624196455015\",\n    appId: \"1:624196455015:web:a6b40fdb25701eb7a7a2c2\",\n    measurementId: \"G-549CBLCS3L\"\n  };\n\n  // Initialize Firebase\nif (!firebase.apps.length) {\n  firebase.default.initializeApp(firebaseConfig);\n  let db = firebase.default.database();\n}\n\n//\n// function writeMonsterData(com2us_id, name, imgUrl) {\n//   firebase.database().ref('Monsters/' + com2us_id).set({\n//     name: name,\n//     imgUrl : imgUrl\n//   });\n// }\n//\n// function writeSecondMon(firstMon){\n//   firebase.database().ref('Monsters/results/' + firstMon).set({\n//     secondMon: Array.from(Array(97).keys()),\n//   });\n// }\n\n// function updateClick(){\n//   var updates = {};\n//   var newClicks = 0;\n//   var clickUpdater = firebase.database().ref('/totalClicks');\n//   clickUpdater.on('value', function(clicks){\n//\n//     // alert(JSON.stringify(clicks));\n//     newClicks = JSON.stringify(clicks)\n//   });\n//   updates['/totalClicks'] = newClicks;\n//   firebase.database().ref().update(updates);\n//   alert(newClicks)\n//   return newClicks;\n// }\n\n\nfunction getFreq(firstMonId, secondMonId){\n    var firstFreq = 0;\n    var secondFreq = 0;\n    if(firstMonId < secondMonId){\n      var firstFreqCount = firebase.database().ref('/Monsters/results/' + firstMonId + '/secondMon/' + secondMonId + '/firstFreq/');\n      var secondFreqCount = firebase.database().ref('/Monsters/results/' + firstMonId + '/secondMon/' + secondMonId + '/secondFreq/');\n      firstFreqCount.on('value', function(frequency) {\n        firstFreq = frequency;\n      });\n      secondFreqCount.on('value', function(frequency) {\n        secondFreq = frequency;\n      });\n    }\n    else if(firstMonId > secondMonId){\n      var firstFreqCount = firebase.database().ref('/Monsters/results/' + secondMonId + '/secondMon/' + firstMonId + '/firstFreq/');\n      var secondFreqCount = firebase.database().ref('/Monsters/results/' + secondMonId + '/secondMon/' + firstMonId + '/secondFreq/');\n      firstFreqCount.on('value', function(frequency) {\n        secondFreq = frequency;\n      });\n      secondFreqCount.on('value', function(frequency) {\n        firstFreq = frequency;\n      });\n    }\n\n    return [firstFreq, secondFreq];\n}\n\nfunction updateFreq(firstMonId, secondMonId, newFirstFreq, newSecondFreq){\n  // alert(newFirstFreq, newSecondFreq)\n  var updates = {};\n  if(firstMonId < secondMonId){\n    var newFreqData = {\n      firstFreq: newFirstFreq,\n      secondFreq: newSecondFreq\n    }\n    updates['/Monsters/results/' + firstMonId + '/secondMon/' + secondMonId] = newFreqData;\n  }\n  else if(firstMonId > secondMonId){\n    var newFreqData = {\n      firstFreq: newSecondFreq,\n      secondFreq: newFirstFreq\n    }\n    updates['/Monsters/results/' + secondMonId + '/secondMon/' + firstMonId] = newFreqData;\n  }\n  firebase.database().ref().update(updates);\n}\n\nfunction writeSecondMon(firstMonId, secondMonId, firstMonFreq, secondMonFreq) {\n  // A post entry.\n  var secondMonData = {\n    firstFreq: firstMonFreq,\n    secondFreq: secondMonFreq\n  };\n\n  // Write the new post's data simultaneously in the posts list and the user's post list.\n  var updates = {};\n  updates['/Monsters/results/' + firstMonId + '/secondMon/' + secondMonId] = secondMonData;\n  // updates['/user-posts/' + uid + '/' + newPostKey] = postData;\n  if(firstMonId < secondMonId){\n    return firebase.database().ref().update(updates);\n  }\n  else{\n    return;\n    // return firebase.database().ref('/Monsters/results/' + firstMonId + '/secondMon/' + id).remove();\n  }\n}\n\n\nclass App extends React.Component {\n    constructor(props){\n    super(props);\n    this.state = {\n      firstMonId : \"\",\n      firstMonImg : \"\",\n      firstMonName : \"\",\n      firstMonFreq : 0,\n      secondMonId : \"\",\n      secondMonImg : \"\",\n      secondMonName : \"\",\n      secondMonFreq : 0,\n      numMon : 97,\n      allMonPage : \"https://swarfarm.com/api/bestiary\",\n      monsterPage : \"https://swarfarm.com/api/v2/monsters/?id__in=&com2us_id=&family_id=&base_stars=6&base_stars__lte=&base_stars__gte=&natural_stars=5&natural_stars__lte=&natural_stars__gte=&obtainable=&fusion_food=&homunculus=false&name=&element=pure&element=fire&element=wind&element=water&awaken_level=1&order_by=\",\n      pressed : false\n    }\n  }\n\n    incFirstFreq(){\n      // alert(\"TouchableTouched\");\n      if(!this.state.pressed){\n\n        this.setState({pressed: true, firstMonFreq : this.state.firstMonFreq+1})\n      // alert(this.state.firstMonFreq)\n        updateFreq(this.state.firstMonId, this.state.secondMonId, this.state.firstMonFreq+1, this.state.secondMonFreq);\n\n\n      }\n    }\n\n    incSecondFreq(){\n\n      if(!this.state.pressed){\n        this.setState({pressed: true, secondMonFreq : this.state.secondMonFreq+1})\n        updateFreq(this.state.firstMonId, this.state.secondMonId, this.state.firstMonFreq, this.state.secondMonFreq+1);\n      }\n    }\n\n    updateMonster(numMon, url){\n      this.setState({pressed : false});\n      const invalidFamily = [19200, 17100, 24600, 23600, 24100, 24200, 24000];\n      const invalidIndividuals = [13813, 14511, 21212, 22612];\n      //TODO: store back into database\n      // var firstRandNum = Math.floor(Math.random() * numMon);\n      // var secondRandNum = Math.floor(Math.random() * numMon);\n      var firstRandNum = 75;\n      var secondRandNum = 91;\n      while(secondRandNum == firstRandNum){\n        secondRandNum = Math.floor(Math.random() * numMon);\n      }\n\n\n      //TODO: Use database instead of url\n      fetch(this.state.monsterPage)\n        .then(response => response.json())\n        .then(data => {\n          while((invalidFamily.indexOf(data.results[firstRandNum].family_id) != -1) || (invalidIndividuals.indexOf(data.results[firstRandNum].com2us_id) != -1) ){\n            firstRandNum = Math.floor(Math.random() * numMon);\n          }\n          while((invalidFamily.indexOf(data.results[secondRandNum].family_id) != -1) || (invalidIndividuals.indexOf(data.results[secondRandNum].com2us_id) != -1) ){\n            secondRandNum = Math.floor(Math.random() * numMon);\n          }\n\n          var freq = getFreq(firstRandNum, secondRandNum);\n          var firstString = JSON.stringify(freq[0]);\n          var secondString = JSON.stringify(freq[1]);\n          var firstNum = JSON.parse(firstString);\n          var secondNum = JSON.parse(secondString);\n          // alert(s)\n          if(firstRandNum < secondRandNum){\n            this.setState({firstMonFreq : firstNum, secondMonFreq: secondNum})\n\n          }\n          else{\n            this.setState({firstMonFreq : secondNum, secondMonFreq: firstNum})\n\n          }\n          var firstMon = data.results[firstRandNum]\n          var secondMon = data.results[secondRandNum]\n          this.setState({\n            firstMonId: firstRandNum,\n            firstMonImg: firstMon.image_filename,\n            firstMonName: firstMon.name,\n            secondMonId: secondRandNum,\n            secondMonImg: secondMon.image_filename,\n            secondMonName: secondMon.name\n          });\n        });\n      }\n\n\n  componentDidMount() {\n    // updateClick();\n    // for(var i = 0; i < 97; i++){\n    //   for(var j = 0; j < 97; j++){\n    //     writeSecondMon(i, j, 0, 0);\n    //   }\n    // }\n    this.updateMonster(this.state.numMon, this.state.monsterPage);\n  }\n\n\n  render(){\n\n    // this.updateMonster(this.state.numMon, this.state.monsterPage);\n    const {numMon, monsterPage, firstMonFreq, secondMonFreq} = this.state;\n\n    var firstMonPercentage = 0;\n    var secondMonPercentage = 0;\n\n    if(firstMonFreq+secondMonFreq!=0){\n      firstMonPercentage = (firstMonFreq/(firstMonFreq+secondMonFreq)*100).toFixed(2);\n      secondMonPercentage = (secondMonFreq/(firstMonFreq+secondMonFreq)*100).toFixed(2);\n    }\n\n    return (\n      <View style={styles.container}>\n        <View style = {styles.comparisonContainer}>\n          <View style = {styles.monsterContainer}>\n\n          <TouchableHighlight\n            onPress = {()=>{this.incFirstFreq()}}>\n            <Image\n              fadeDuration = {1000}\n              source={{\n                uri: \"https://swarfarm.com/static/herders/images/monsters/\" + this.state.firstMonImg,\n              }}\n              style={{ width: 128, height: 128 }}/>\n            </TouchableHighlight>\n            <Text>{firstMonPercentage} %</Text>\n          </View>\n\n          <Text> vs. </Text>\n\n          <View style = {styles.monsterContainer}>\n\n            <TouchableHighlight\n              onPress = {()=>{this.incSecondFreq()}}>\n                <Image\n                fadeDuration = {1000}\n                source={{\n                  uri: \"https://swarfarm.com/static/herders/images/monsters/\" + this.state.secondMonImg,\n                }}\n                style={{ width: 128, height: 128 }}/>\n            </TouchableHighlight>\n            <Text>{secondMonPercentage} %</Text>\n\n          </View>\n        </View>\n        <View style = {styles.comparisonContainer}>\n          <Text>{firstMonFreq}</Text>\n          <Text> vs. </Text>\n          <Text>{secondMonFreq}</Text>\n        </View>\n        <Button\n          onPress = {() => {this.updateMonster(numMon, monsterPage)}}\n          title = \"Show Me Two Other Monsters!\"\n          color = '#DB8E71'\n          />\n      </View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  comparisonContainer: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center',\n    flexDirection: 'row'\n  },\n\n  monsterContainer: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center',\n    flexDirection: 'column'\n  },\n});\n\nexport default App;\n"],"sourceRoot":""}